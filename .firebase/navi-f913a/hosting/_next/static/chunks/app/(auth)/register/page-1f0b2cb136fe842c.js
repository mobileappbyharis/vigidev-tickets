(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{6318:function(e,t,s){Promise.resolve().then(s.bind(s,3777))},3777:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(7437),l=s(2265),r=s(7648),i=s(2141),o=s(5898);function c(){let{success:e,error:t}=(0,o.p)(),[s,c]=(0,l.useState)(""),[a,u]=(0,l.useState)(""),[d,m]=(0,l.useState)(!1),[x,b]=(0,l.useState)(!1),h=async n=>{n.preventDefault(),m(!0);try{console.log("\uD83D\uDCE7 Sending magic link to:",s);let{error:n}=await i.OQ.auth.signInWithOtp({email:s,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback"),data:{full_name:a}}});if(n){console.error("❌ Magic link send error:",n.message),t(n.message),m(!1);return}console.log("✓ Magic link sent successfully"),b(!0),e("Magic link envoy\xe9! V\xe9rifiez votre email pour continuer.")}catch(e){t("An unexpected error occurred"),console.error(e)}finally{m(!1)}};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 px-4",children:(0,n.jsx)("div",{className:"w-full max-w-md",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-center text-slate-900 mb-2",children:"VigiTickets"}),(0,n.jsx)("p",{className:"text-center text-slate-600 mb-8",children:x?"Lien envoy\xe9!":"Cr\xe9er un compte client"}),x?(0,n.jsxs)("div",{className:"text-center space-y-4",children:[(0,n.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,n.jsxs)("p",{className:"text-slate-700",children:["Un lien de connexion a \xe9t\xe9 envoy\xe9 \xe0 ",(0,n.jsx)("strong",{children:s})]})}),(0,n.jsx)("p",{className:"text-sm text-slate-600",children:"Cliquez sur le lien dans l'email pour cr\xe9er votre compte et acc\xe9der directement \xe0 VigiTickets."}),(0,n.jsx)("button",{onClick:()=>b(!1),className:"text-sm text-blue-600 hover:underline",children:"Retourner au formulaire"})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nom complet"}),(0,n.jsx)("input",{type:"text",value:a,onChange:e=>u(e.target.value),required:!0,placeholder:"Jean Dupont",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:d})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),(0,n.jsx)("input",{type:"email",value:s,onChange:e=>c(e.target.value),required:!0,placeholder:"vous@exemple.com",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:d})]}),(0,n.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white font-medium py-2 rounded-lg hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed transition-colors",children:d?"Envoi en cours...":"Recevoir un lien magique"})]})}),(0,n.jsxs)("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[(0,n.jsx)("p",{className:"text-center text-slate-600 text-sm mb-4",children:"Vous avez d\xe9j\xe0 un compte?"}),(0,n.jsx)(r.default,{href:"/login",className:"block w-full text-center bg-slate-100 text-slate-700 font-medium py-2 rounded-lg hover:bg-slate-200 transition-colors",children:"Se connecter"})]}),(0,n.jsx)("p",{className:"text-center text-slate-500 text-xs mt-6",children:"\xa9 2025 Vigidev. Tous droits r\xe9serv\xe9s."})]})})})}},5898:function(e,t,s){"use strict";s.d(t,{p:function(){return l}});var n=s(9064);function l(){return{success:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;n.ZP.success(e,{duration:t})},error:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;n.ZP.error(e,{duration:t})},info:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;(0,n.ZP)(e,{duration:t})},loading:e=>n.ZP.loading(e),dismiss:e=>{e?n.ZP.dismiss(e):n.ZP.dismiss()}}}},2141:function(e,t,s){"use strict";s.d(t,{OQ:function(){return i}});var n=s(3053);let l="https://tzmilnltvvtsvdmrkhin.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6bWlsbmx0dnZ0c3ZkbXJraGluIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwMjI3NjMsImV4cCI6MjA2ODU5ODc2M30.Z0H2mZBMo6qRYrcgxCHNN5C6hLVR804_W28gK2mMz4o";if(!l||!r)throw Error("Missing Supabase environment variables. Check .env.local file.");let i=(0,n.eI)(l,r)}},function(e){e.O(0,[53,64,648,971,117,744],function(){return e(e.s=6318)}),_N_E=e.O()}]);