(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{7943:function(e,t,s){Promise.resolve().then(s.bind(s,1734))},1734:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(7437),n=s(2265),i=s(9376),l=s(7648),o=s(2141),a=s(5898);function c(){let e=(0,i.useRouter)(),{success:t,error:s}=(0,a.p)(),[c,u]=(0,n.useState)(""),[d,m]=(0,n.useState)(""),[f,b]=(0,n.useState)(!1),h=async r=>{r.preventDefault(),b(!0);try{let{data:r,error:n}=await o.OQ.auth.signInWithPassword({email:c,password:d});if(n){s(n.message),b(!1);return}if(r.user){let{data:n,error:i}=await o.OQ.from("vigitckets_profiles").select("role").eq("id",r.user.id).single();if(i){s("Failed to load user profile"),b(!1);return}t("Login successful!"),"client"===n.role?e.push("/client/projects"):e.push("/vigidev/tickets")}}catch(e){s("An unexpected error occurred"),console.error(e)}finally{b(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 px-4",children:(0,r.jsx)("div",{className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center text-slate-900 mb-2",children:"VigiTickets"}),(0,r.jsx)("p",{className:"text-center text-slate-600 mb-8",children:"Gestion de tickets pour Vigidev"}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value),required:!0,placeholder:"vous@exemple.com",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:f})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mot de passe"}),(0,r.jsx)("input",{type:"password",value:d,onChange:e=>m(e.target.value),required:!0,placeholder:"••••••••",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:f})]}),(0,r.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white font-medium py-2 rounded-lg hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed transition-colors",children:f?"Connexion en cours...":"Se connecter"})]}),(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[(0,r.jsx)("p",{className:"text-center text-slate-600 text-sm mb-4",children:"Pas encore de compte?"}),(0,r.jsx)(l.default,{href:"/register",className:"block w-full text-center bg-slate-100 text-slate-700 font-medium py-2 rounded-lg hover:bg-slate-200 transition-colors",children:"S'inscrire"})]}),(0,r.jsx)("p",{className:"text-center text-slate-500 text-xs mt-6",children:"\xa9 2025 Vigidev. Tous droits r\xe9serv\xe9s."})]})})})}},5898:function(e,t,s){"use strict";s.d(t,{p:function(){return n}});var r=s(9064);function n(){return{success:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;r.ZP.success(e,{duration:t})},error:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;r.ZP.error(e,{duration:t})},info:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;(0,r.ZP)(e,{duration:t})},loading:e=>r.ZP.loading(e),dismiss:e=>{e?r.ZP.dismiss(e):r.ZP.dismiss()}}}},2141:function(e,t,s){"use strict";s.d(t,{OQ:function(){return l}});var r=s(3053);let n="https://tzmilnltvvtsvdmrkhin.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR6bWlsbmx0dnZ0c3ZkbXJraGluIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwMjI3NjMsImV4cCI6MjA2ODU5ODc2M30.Z0H2mZBMo6qRYrcgxCHNN5C6hLVR804_W28gK2mMz4o";if(!n||!i)throw Error("Missing Supabase environment variables. Check .env.local file.");let l=(0,r.eI)(n,i)},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[53,64,648,971,117,744],function(){return e(e.s=7943)}),_N_E=e.O()}]);